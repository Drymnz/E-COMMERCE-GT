<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>
          <i class="bi bi-people-fill me-2"></i>
          Historial de Empleados
        </h2>
        <button class="btn btn-primary" (click)="cargarDatos()">
          <i class="bi bi-arrow-clockwise me-2"></i>
          Actualizar
        </button>
      </div>

      @if (cargando) {
        <div class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
          </div>
          <p class="mt-3">Cargando empleados...</p>
        </div>
      }

      @if (error && !cargando) {
        <div class="alert alert-danger" role="alert">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          Error al cargar los empleados. Por favor, intente nuevamente.
        </div>
      }

      @if (!cargando && !error && empleados.length === 0) {
        <div class="alert alert-info" role="alert">
          <i class="bi bi-info-circle-fill me-2"></i>
          No hay empleados registrados en el sistema.
        </div>
      }

      @if (!cargando && !error && empleados.length > 0) {
        <div class="card">
          <div class="card-header bg-primary text-white">
            <i class="bi bi-table me-2"></i>
            Total de empleados: {{ empleados.length }}
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover table-striped mb-0">
                <thead class="table-dark">
                  <tr>
                    <th scope="col">
                      <i class="bi bi-hash me-1"></i>
                      ID
                    </th>
                    <th scope="col">
                      <i class="bi bi-person-fill me-1"></i>
                      Nombre Completo
                    </th>
                    <th scope="col">
                      <i class="bi bi-envelope-fill me-1"></i>
                      Email
                    </th>
                    <th scope="col">
                      <i class="bi bi-shield-fill me-1"></i>
                      Rol
                    </th>
                    <th scope="col">
                      <i class="bi bi-circle-fill me-1"></i>
                      Estado
                    </th>
                  </tr>
                </thead>
                <tbody>
                  @for (empleado of empleados; track empleado.id_usuario) {
                    <tr>
                      <td>{{ empleado.id_usuario }}</td>
                      <td>
                        <strong>{{ empleado.nombreCompleto }}</strong>
                      </td>
                      <td>
                        <i class="bi bi-envelope me-1 text-muted"></i>
                        {{ empleado.email }}
                      </td>
                      <td>
                        <span [class]="getClaseRol(empleado.id_rol)">
                          {{ getNombreRol(empleado.id_rol) }}
                        </span>
                      </td>
                      <td>
                        <span [class]="getClaseEstado(empleado.id_estado)">
                          <i class="bi bi-circle-fill me-1"></i>
                          {{ getNombreEstado(empleado.id_estado) }}
                        </span>
                      </td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</div>