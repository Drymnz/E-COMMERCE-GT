<div class="card shadow-lg border-0">
  <div class="card-body p-4">
    <div class="row g-4">
      <!-- Imagen del Artículo -->
      <div class="col-md-6">
        <div class="position-relative">
          <img
            [src]="articulo.imagen"
            [alt]="articulo.nombre"
            class="img-fluid rounded-3"
          />
          
          
        </div>
      </div>

      <!-- Información del Artículo -->
      <div class="col-md-6">
        <!-- Categorías con nombres reales -->
        

        <!-- Nombre -->
        <h1 class="h2 fw-bold mb-3">{{ articulo.nombre }}</h1>

        <!-- Estado del artículo -->
        <div class="mb-3">
          <span class="badge bg-info">
            <i class="bi bi-info-circle-fill me-1"></i>
            {{ getNombreEstado() }}
          </span>
        </div>

        <!-- Descripción -->
        <p class="text-muted mb-4">
          <i class="bi bi-text-paragraph text-secondary me-2"></i>
          {{ articulo.descripcion }}
        </p>

        <!-- Precio destacado -->
        <div class="mb-4 p-3 bg-light rounded-3">
          <div class="d-flex align-items-center">
            <i class="bi bi-currency-dollar text-success fs-4 me-2"></i>
            <div>
              <small class="text-muted d-block">Precio</small>
              <span class="h3 text-success fw-bold mb-0">
                {{ articulo.precioFormateado }}
              </span>
            </div>
          </div>
        </div>

          @for (categoria of this.articulo.categorias; track categoria) {
            <span class="badge bg-primary me-2 mb-2">
              <i class="bi bi-tag-fill me-1"></i>
              {{ categoria }}
            </span>
          }

        <!-- Indicador de Stock -->
        <div class="mb-4">
          <div class="d-flex align-items-center">
            <i 
              [class]="'bi fs-5 me-2 ' + (articulo.stock === 0 ? 'bi-x-circle-fill text-danger' : 
                       articulo.stock < 10 ? 'bi-exclamation-triangle-fill text-warning' : 
                       'bi-check-circle-fill text-success')"
            ></i>
            <span class="fw-semibold">
              {{ articulo.stock }} unidades disponibles
            </span>
          </div>
        </div>

        <!-- Mensaje de éxito al agregar -->
        @if (mensajeAgregado()) {
          <div class="alert alert-success alert-dismissible fade show mb-3" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>¡Producto agregado!</strong> Se añadió al carrito exitosamente.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        }

        <!-- Controles de Cantidad y Agregar al Carrito -->
        @if (articulo.disponible) {
          <div>
            <div class="row g-3">
              <!-- Selector de cantidad -->
              <div class="col-12 col-sm-5">
                <label class="form-label fw-semibold mb-2">
                  <i class="bi bi-123 me-1"></i>
                  Cantidad
                </label>
                <div class="input-group">
                  <button
                    (click)="decrementarCantidad()"
                    class="btn btn-outline-secondary"
                    [disabled]="cantidad() <= 1"
                    type="button"
                  >
                    <i class="bi bi-dash-lg">-</i>
                  </button>
                 <input
                    type="number"
                    [(ngModel)]="cantidadInput"
                    (ngModelChange)="onCantidadChange($event)"
                    class="form-control text-center"
                    [min]="1"
                    [max]="articulo.stock"
                  />
                  <button
                    (click)="incrementarCantidad()"
                    class="btn btn-outline-secondary"
                    [disabled]="cantidad() >= articulo.stock"
                    type="button"
                  >
                    <i class="bi bi-plus-lg">+</i>
                  </button>
                </div>
              </div>

              <!-- Botón agregar al carrito -->
              <div class="col-12 col-sm-7">
                <button
                  (click)="agregarAlCarrito()"
                  class="btn btn-primary btn-lg w-100 h-100"
                  [disabled]="!articulo.disponible"
                >
                  <i class="bi bi-cart-plus-fill me-2"></i>
                  Agregar al Carrito
                </button>
              </div>
            </div>

            <!-- Subtotal estimado -->
            <div class="mt-3 p-3 bg-light rounded-3">
              <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted">
                  <i class="bi bi-calculator me-1"></i>
                  Subtotal ({{ cantidad() }} {{ cantidad() === 1 ? 'unidad' : 'unidades' }})
                </span>
                <span class="h5 text-primary fw-bold mb-0">
                  Q {{ (articulo.precio * cantidad()).toFixed(2) }}
                </span>
              </div>
            </div>
          </div>
        }

        <!-- Mensaje de producto no disponible -->
        @if (!articulo.disponible) {
          <div class="alert alert-danger" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Producto no disponible</strong>
            <p class="mb-0 mt-1">Este artículo no está disponible para la venta en este momento.</p>
          </div>
        }
      </div>
    </div>
  </div>
</div>